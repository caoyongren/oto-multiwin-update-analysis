# Android窗口管理服务WindowManagerService切换Activity窗口（App Transition）的过程分析

ActivityManagerService服务在启动一个Activity组件的过程中，会调用到ActivityStack类的成员函数startActivityLocked。ActivityStack类的成员函数startActivityLocked首先会给正在启动的Activity组件准备一个切换操作，接着再调用其它的成员函数来通知前一个激活的Activity组件进入到Paused状态。等到前一个激活的Activity组件进入到Paused状态之后，ActivityManagerService服务就会检查用来运行正在启动的Activity组件的进程启动起来了没有。如果这个进程还没有启动，那么ActivityManagerService服务就会将该进程启动起来，然后再调用ActivityStack类的成员函数realStartActivityLocked来将正在启动的Activity组件加载起来，并且将它的状态设置为Resumed，最后通知WindowManagerService服务执行前面所准备的切换操作

## ActivityStack.startActivityLocked
- tartActivityLocked首先会给正在启动的Activity组件准备一个切换操作,是否切换按情况而定，如果是第一个Activity就不需要切换